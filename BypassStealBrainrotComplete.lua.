-- Auto Steal Highest M/S Brainrot Script with G Hotkey (Bypass E)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")

-- Configuração da hotkey (tecla G)
local HOTKEY = Enum.KeyCode.G

-- Função para encontrar o brainrot com o maior M/S
local function findHighestMSBrainrot()
    local highestValue, targetModel = 0, nil
    local targetName = nil
    print("Procurando brainrots com maior M/S em Workspace.Plots...")
    
    local plots = Workspace:FindFirstChild("Plots")
    if not plots then
        print("Pasta Plots não encontrada! Verificando Workspace diretamente...")
        plots = Workspace
    end
    
    for _, plot in pairs(plots:GetChildren()) do
        if plot:IsA("Folder") or plot:IsA("Model") then
            for _, obj in pairs(plot:GetDescendants()) do
                if obj:IsA("Model") and obj.Name ~= "Plots" then
                    local valueObj = obj:FindFirstChild("Value") or obj:FindFirstChild("Price") or obj:FindFirstChildWhichIsA("NumberValue")
                    if valueObj then
                        local value = valueObj.Value or valueObj
                        print("Verificando:", obj.Name, "Valor:", value)
                        if value > highestValue then
                            highestValue = value
                            targetModel = obj
                            targetName = obj.Name
                            print("Novo brainrot mais caro:", obj.Name, "M/S:", value)
                        end
                    else
                        print("Nenhum valor encontrado em:", obj.Name)
                    end
                end
            end
        end
    end
    
    if not targetModel then 
        print("Nenhum brainrot com valor encontrado!")
    else
        print("Brainrot selecionado:", targetName, "M/S:", highestValue)
    end
    return targetModel
end

-- Função para roubar instantaneamente (bypass do E)
local function stealBrainrot(model)
    if not model then
        print("Nenhum brainrot para roubar!")
        return
    end
    
    local prompt = model:FindFirstChildWhichIsA("ProximityPrompt", true)
    if prompt then
        print("ProximityPrompt encontrado em:", model.Name, "at position:", model:GetPivot().Position)
        prompt:FireProximityPrompt()  -- Bypass do segurar E
        print("Roubo ativado!")
    else
        print("ProximityPrompt não encontrado em:", model.Name)
        -- Fallback para eventos remotos
        local stealEvent = model:FindFirstChild("Steal") or model:FindFirstChild("Rob")
        if stealEvent and stealEvent:IsA("RemoteEvent") then
            print("Tentando FireServer em:", stealEvent.Name)
            stealEvent:FireServer()
        elseif stealEvent and stealEvent:IsA("RemoteFunction") then
            print("Tentando InvokeServer em:", stealEvent.Name)
            stealEvent:InvokeServer()
        else
            print("Nenhum método de roubo (ProximityPrompt ou evento) encontrado em:", model.Name)
        end
    end
end

-- Hotkey para roubo instantâneo
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == HOTKEY then
        print("Hotkey G pressionada!")
        local target = findHighestMSBrainrot()
        stealBrainrot(target)
    end
end)

print("Script ativado! Pressione G para roubar o brainrot com maior M/S.")
